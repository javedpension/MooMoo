/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={611:e=>{!function(t){e.exports=t;var n="listeners",r={on:function(e,t){return o(this,e).push(t),this},once:function(e,t){var n=this;return r.originalListener=t,o(n,e).push(r),n;function r(){a.call(n,e,r),t.apply(this,arguments)}},off:a,emit:function(e,t){var n=this,r=o(n,e,!0);if(!r)return!1;var i=arguments.length;if(1===i)r.forEach((function(e){e.call(n)}));else if(2===i)r.forEach((function(e){e.call(n,t)}));else{var a=Array.prototype.slice.call(arguments,1);r.forEach((function(e){e.apply(n,a)}))}return!!r.length}};function i(e){for(var t in r)e[t]=r[t];return e}function a(e,t){var r,i=this;if(arguments.length){if(t){if(r=o(i,e,!0)){if(!(r=r.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return a.call(i,e);i[n][e]=r}}else if((r=i[n])&&(delete r[e],!Object.keys(r).length))return a.call(i)}else delete i[n];return i}function o(e,t,r){if(!r||e[n]){var i=e[n]||(e[n]={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}((function e(){if(!(this instanceof e))return new e}))},251:(e,t)=>{t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,f=-7,h=n?i-1:0,u=n?-1:1,d=e[t+h];for(h+=u,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+e[t+h],h+=u,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=r;f>0;o=256*o+e[t+h],h+=u,f-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,f=(1<<c)-1,h=f>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?u/l:u*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*y}},305:function(e,t){!function(e){var t,n="undefined",r=n!==typeof Buffer&&Buffer,i=n!==typeof Uint8Array&&Uint8Array,a=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],s=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},l=4294967296;function c(s,c,v){var b=c?0:4,S=c?4:0,E=c?0:3,k=c?1:2,B=c?2:1,A=c?3:0,P=c?m:w,I=c?g:x,M=R.prototype,U="is"+s,T="_"+U;return M.buffer=void 0,M.offset=0,M[T]=!0,M.toNumber=W,M.toString=function(e){var t=this.buffer,n=this.offset,r=C(t,n+b),i=C(t,n+S),a="",o=!v&&2147483648&r;for(o&&(r=~r,i=l-i),e=e||10;;){var s=r%e*l+i;if(r=Math.floor(r/e),i=Math.floor(s/e),a=(s%e).toString(e)+a,!r&&!i)break}return o&&(a="-"+a),a},M.toJSON=W,M.toArray=f,r&&(M.toBuffer=h),i&&(M.toArrayBuffer=u),R[U]=function(e){return!(!e||!e[T])},e[s]=R,R;function R(e,r,s,c){return this instanceof R?function(e,r,s,c,f){i&&a&&(r instanceof a&&(r=new i(r)),c instanceof a&&(c=new i(c))),r||s||c||t?(d(r,s)||(f=s,c=r,s=0,r=new(t||Array)(8)),e.buffer=r,e.offset=s|=0,n!==typeof c&&("string"==typeof c?function(e,t,n,r){var i=0,a=n.length,o=0,s=0;"-"===n[0]&&i++;for(var c=i;i<a;){var f=parseInt(n[i++],r);if(!(f>=0))break;s=s*r+f,o=o*r+Math.floor(s/l),s%=l}c&&(o=~o,s?s=l-s:o++),D(e,t+b,o),D(e,t+S,s)}(r,s,c,f||10):d(c,f)?p(r,s,c,f):"number"==typeof f?(D(r,s+b,c),D(r,s+S,f)):c>0?P(r,s,c):c<0?I(r,s,c):p(r,s,o,0))):e.buffer=y(o,0)}(this,e,r,s,c):new R(e,r,s,c)}function W(){var e=this.buffer,t=this.offset,n=C(e,t+b),r=C(e,t+S);return v||(n|=0),n?n*l+r:r}function D(e,t,n){e[t+A]=255&n,n>>=8,e[t+B]=255&n,n>>=8,e[t+k]=255&n,n>>=8,e[t+E]=255&n}function C(e,t){return 16777216*e[t+E]+(e[t+k]<<16)+(e[t+B]<<8)+e[t+A]}}function f(e){var n=this.buffer,r=this.offset;return t=null,!1!==e&&0===r&&8===n.length&&s(n)?n:y(n,r)}function h(e){var n=this.buffer,i=this.offset;if(t=r,!1!==e&&0===i&&8===n.length&&Buffer.isBuffer(n))return n;var a=new r(8);return p(a,0,n,i),a}function u(e){var n=this.buffer,r=this.offset,o=n.buffer;if(t=i,!1!==e&&0===r&&o instanceof a&&8===o.byteLength)return o;var s=new i(8);return p(s,0,n,r),s.buffer}function d(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function p(e,t,n,r){t|=0,r|=0;for(var i=0;i<8;i++)e[t++]=255&n[r++]}function y(e,t){return Array.prototype.slice.call(e,t,t+8)}function m(e,t,n){for(var r=t+8;r>t;)e[--r]=255&n,n/=256}function g(e,t,n){var r=t+8;for(n++;r>t;)e[--r]=255&-n^255,n/=256}function w(e,t,n){for(var r=t+8;t<r;)e[t++]=255&n,n/=256}function x(e,t,n){var r=t+8;for(n++;t<r;)e[t++]=255&-n^255,n/=256}c("Uint64BE",!0,!0),c("Int64BE",!0,!1),c("Uint64LE",!1,!0),c("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},634:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},830:(e,t,n)=>{t.encode=n(870).encode,t.decode=n(402).decode,t.Encoder=n(158).Encoder,t.Decoder=n(762).Decoder,t.createCodec=n(325).createCodec,t.codec=n(884).codec},924:function(e){function t(e){return e&&e.isBuffer&&e}e.exports=t("undefined"!=typeof Buffer&&Buffer)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer},179:(e,t)=>{t.copy=function(e,t,n,r){var i;n||(n=0),r||0===r||(r=this.length),t||(t=0);var a=r-n;if(e===this&&n<t&&t<r)for(i=a-1;i>=0;i--)e[i+t]=this[i+n];else for(i=0;i<a;i++)e[i+t]=this[i+n];return a},t.toString=function(e,t,n){var r=this,i=0|t;n||(n=r.length);for(var a="",o=0;i<n;)(o=r[i++])<128?a+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&r[i++]:224==(240&o)?o=(15&o)<<12|(63&r[i++])<<6|63&r[i++]:240==(248&o)&&(o=(7&o)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++]),o>=65536?(o-=65536,a+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):a+=String.fromCharCode(o));return a},t.write=function(e,t){for(var n=this,r=t||(t|=0),i=e.length,a=0,o=0;o<i;)(a=e.charCodeAt(o++))<128?n[r++]=a:a<2048?(n[r++]=192|a>>>6,n[r++]=128|63&a):a<55296||a>57343?(n[r++]=224|a>>>12,n[r++]=128|a>>>6&63,n[r++]=128|63&a):(a=65536+(a-55296<<10|e.charCodeAt(o++)-56320),n[r++]=240|a>>>18,n[r++]=128|a>>>12&63,n[r++]=128|a>>>6&63,n[r++]=128|63&a);return r-t}},964:(e,t,n)=>{var r=n(204),i=e.exports=a(0);function a(e){return new Array(e)}i.alloc=a,i.concat=r.concat,i.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},847:(e,t,n)=>{var r=n(204),i=r.global,a=e.exports=r.hasBuffer?o(0):[];function o(e){return new i(e)}a.alloc=r.hasBuffer&&i.alloc||o,a.concat=r.concat,a.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(a,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},43:(e,t,n)=>{var r,i=n(179);t.copy=c,t.slice=f,t.toString=function(e,t,n){return(!s&&a.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},t.write=(r="write",function(){return(this[r]||i[r]).apply(this,arguments)});var a=n(204),o=a.global,s=a.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=s&&!o.TYPED_ARRAY_SUPPORT;function c(e,t,n,r){var o=a.isBuffer(this),s=a.isBuffer(e);if(o&&s)return this.copy(e,t,n,r);if(l||o||s||!a.isView(this)||!a.isView(e))return i.copy.call(this,e,t,n,r);var c=n||null!=r?f.call(this,n,r):this;return e.set(c,t),c.length}function f(e,t){var n=this.slice||!l&&this.subarray;if(n)return n.call(this,e,t);var r=a.alloc.call(this,t-e);return c.call(this,r,0,e,t),r}},188:(e,t,n)=>{var r=n(204),i=e.exports=r.hasArrayBuffer?a(0):[];function a(e){return new Uint8Array(e)}i.alloc=a,i.concat=r.concat,i.from=function(e){if(r.isView(e)){var t=e.byteOffset,n=e.byteLength;(e=e.buffer).byteLength!==n&&(e.slice?e=e.slice(t,t+n):(e=new Uint8Array(e)).byteLength!==n&&(e=Array.prototype.slice.call(e,t,t+n)))}else{if("string"==typeof e)return r.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},204:(e,t,n)=>{var r=t.global=n(924),i=t.hasBuffer=r&&!!r.isBuffer,a=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,o=t.isArray=n(634);t.isArrayBuffer=a?function(e){return e instanceof ArrayBuffer||p(e)}:g;var s=t.isBuffer=i?r.isBuffer:g,l=t.isView=a?ArrayBuffer.isView||w("ArrayBuffer","buffer"):g;t.alloc=d,t.concat=function(e,n){n||(n=0,Array.prototype.forEach.call(e,(function(e){n+=e.length})));var r=this!==t&&this||e[0],i=d.call(r,n),a=0;return Array.prototype.forEach.call(e,(function(e){a+=u.copy.call(e,i,a)})),i},t.from=function(e){return"string"==typeof e?y.call(this,e):m(this).from(e)};var c=t.Array=n(964),f=t.Buffer=n(847),h=t.Uint8Array=n(188),u=t.prototype=n(43);function d(e){return m(this).alloc(e)}var p=w("ArrayBuffer");function y(e){var t=3*e.length,n=d.call(this,t),r=u.write.call(n,e);return t!==r&&(n=u.slice.call(n,0,r)),n}function m(e){return s(e)?f:l(e)?h:o(e)?c:i?f:a?h:c}function g(){return!1}function w(e,t){return e="[object "+e+"]",function(n){return null!=n&&{}.toString.call(t?n[t]:n)===e}}},704:(e,t,n)=>{var r=n(634);t.createCodec=s,t.install=function(e){for(var t in e)a.prototype[t]=o(a.prototype[t],e[t])},t.filter=function(e){return r(e)?function(e){return e=e.slice(),function(n){return e.reduce(t,n)};function t(e,t){return t(e)}}(e):e};var i=n(204);function a(e){if(!(this instanceof a))return new a(e);this.options=e,this.init()}function o(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function s(e){return new a(e)}a.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},t.preset=s({preset:!0})},884:(e,t,n)=>{n(294),n(897),t.codec={preset:n(704).preset}},785:(e,t,n)=>{t.n=i;var r=n(294).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(614).I.mixin(i.prototype),i.prototype.codec=r,i.prototype.fetch=function(){return this.codec.decode(this)}},402:(e,t,n)=>{t.decode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(785).n},762:(e,t,n)=>{t.Decoder=a;var r=n(611),i=n(785).n;function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}a.prototype=new i,r.mixin(a.prototype),a.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},a.prototype.push=function(e){this.emit("data",e)},a.prototype.end=function(e){this.decode(e),this.emit("end")}},357:(e,t,n)=>{t.D=i;var r=n(897).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(614).w.mixin(i.prototype),i.prototype.codec=r,i.prototype.write=function(e){this.codec.encode(this,e)}},870:(e,t,n)=>{t.encode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(357).D},158:(e,t,n)=>{t.Encoder=a;var r=n(611),i=n(357).D;function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}a.prototype=new i,r.mixin(a.prototype),a.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},a.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},816:(e,t,n)=>{t.u=function e(t,n){if(!(this instanceof e))return new e(t,n);this.buffer=r.from(t),this.type=n};var r=n(204)},236:(e,t,n)=>{t.setExtPackers=function(e){e.addExtPacker(14,Error,[h,l]),e.addExtPacker(1,EvalError,[h,l]),e.addExtPacker(2,RangeError,[h,l]),e.addExtPacker(3,ReferenceError,[h,l]),e.addExtPacker(4,SyntaxError,[h,l]),e.addExtPacker(5,TypeError,[h,l]),e.addExtPacker(6,URIError,[h,l]),e.addExtPacker(10,RegExp,[f,l]),e.addExtPacker(11,Boolean,[c,l]),e.addExtPacker(12,String,[c,l]),e.addExtPacker(13,Date,[Number,l]),e.addExtPacker(15,Number,[c,l]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,o),e.addExtPacker(18,Uint8Array,o),e.addExtPacker(19,Int16Array,o),e.addExtPacker(20,Uint16Array,o),e.addExtPacker(21,Int32Array,o),e.addExtPacker(22,Uint32Array,o),e.addExtPacker(23,Float32Array,o),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,o),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,o),e.addExtPacker(26,ArrayBuffer,o),e.addExtPacker(29,DataView,o)),i.hasBuffer&&e.addExtPacker(27,a,i.from)};var r,i=n(204),a=i.global,o=i.Uint8Array.from,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function l(e){return r||(r=n(870).encode),r(e)}function c(e){return e.valueOf()}function f(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function h(e){var t={};for(var n in s)t[n]=e[n];return t}},623:(e,t,n)=>{t.setExtUnpackers=function(e){e.addExtUnpacker(14,[s,c(Error)]),e.addExtUnpacker(1,[s,c(EvalError)]),e.addExtUnpacker(2,[s,c(RangeError)]),e.addExtUnpacker(3,[s,c(ReferenceError)]),e.addExtUnpacker(4,[s,c(SyntaxError)]),e.addExtUnpacker(5,[s,c(TypeError)]),e.addExtUnpacker(6,[s,c(URIError)]),e.addExtUnpacker(10,[s,l]),e.addExtUnpacker(11,[s,f(Boolean)]),e.addExtUnpacker(12,[s,f(String)]),e.addExtUnpacker(13,[s,f(Date)]),e.addExtUnpacker(15,[s,f(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,f(Int8Array)),e.addExtUnpacker(18,f(Uint8Array)),e.addExtUnpacker(19,[h,f(Int16Array)]),e.addExtUnpacker(20,[h,f(Uint16Array)]),e.addExtUnpacker(21,[h,f(Int32Array)]),e.addExtUnpacker(22,[h,f(Uint32Array)]),e.addExtUnpacker(23,[h,f(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[h,f(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,f(Uint8ClampedArray)),e.addExtUnpacker(26,h),e.addExtUnpacker(29,[h,f(DataView)])),i.hasBuffer&&e.addExtUnpacker(27,f(a))};var r,i=n(204),a=i.global,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(e){return r||(r=n(402).decode),r(e)}function l(e){return RegExp.apply(null,e)}function c(e){return function(t){var n=new e;for(var r in o)n[r]=t[r];return n}}function f(e){return function(t){return new e(t)}}function h(e){return new Uint8Array(e).buffer}},325:(e,t,n)=>{n(294),n(897),t.createCodec=n(704).createCodec},614:(e,t,n)=>{t.I=a,t.w=o;var r=n(204),i="BUFFER_SHORTAGE";function a(){if(!(this instanceof a))return new a}function o(){if(!(this instanceof o))return new o}function s(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function l(e){(this.buffers||(this.buffers=[])).push(e)}function c(e){return function(t){for(var n in e)t[n]=e[n];return t}}a.mixin=c({bufferish:r,write:function(e){var t=this.offset?r.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=i)throw e;this.offset=t;break}this.push(e)}},push:l,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:s,reserve:function(e){var t=this.offset,n=t+e;if(n>this.buffer.length)throw new Error(i);return this.offset=n,t},offset:0}),a.mixin(a.prototype),o.mixin=c({bufferish:r,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return r.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:l,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:s,reserve:function(e){var t=0|e;if(this.buffer){var n=this.buffer.length,r=0|this.offset,i=r+t;if(i<n)return this.offset=i,r;this.flush(),e=Math.max(e,Math.min(2*n,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var n=this.reserve(t);r.prototype.copy.call(e,this.buffer,n)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),o.mixin(o.prototype)},294:(e,t,n)=>{var r=n(816).u,i=n(623),a=n(970).readUint8,o=n(4),s=n(704);function l(){var e=this.options;return this.decode=function(e){var t=o.getReadToken(e);return function(e){var n=a(e),r=t[n];if(!r)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return r(e)}}(e),e&&e.preset&&i.setExtUnpackers(this),this}s.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=s.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new r(t,e)}},init:l}),t.preset=l.call(s.preset)},970:(e,t,n)=>{var r=n(251),i=n(305),a=i.Uint64BE,o=i.Int64BE;t.getReadFormat=function(e){var t=s.hasArrayBuffer&&e&&e.binarraybuffer,n=e&&e.int64;return{map:c&&e&&e.usemap?u:h,array:d,str:p,bin:t?m:y,ext:g,uint8:w,uint16:v,uint32:S,uint64:k(8,n?P:B),int8:x,int16:b,int32:E,int64:k(8,n?I:A),float32:k(4,M),float64:k(8,U)}},t.readUint8=w;var s=n(204),l=n(43),c="undefined"!=typeof Map,f=!0;function h(e,t){var n,r={},i=new Array(t),a=new Array(t),o=e.codec.decode;for(n=0;n<t;n++)i[n]=o(e),a[n]=o(e);for(n=0;n<t;n++)r[i[n]]=a[n];return r}function u(e,t){var n,r=new Map,i=new Array(t),a=new Array(t),o=e.codec.decode;for(n=0;n<t;n++)i[n]=o(e),a[n]=o(e);for(n=0;n<t;n++)r.set(i[n],a[n]);return r}function d(e,t){for(var n=new Array(t),r=e.codec.decode,i=0;i<t;i++)n[i]=r(e);return n}function p(e,t){var n=e.reserve(t),r=n+t;return l.toString.call(e.buffer,"utf-8",n,r)}function y(e,t){var n=e.reserve(t),r=n+t,i=l.slice.call(e.buffer,n,r);return s.from(i)}function m(e,t){var n=e.reserve(t),r=n+t,i=l.slice.call(e.buffer,n,r);return s.Uint8Array.from(i).buffer}function g(e,t){var n=e.reserve(t+1),r=e.buffer[n++],i=n+t,a=e.codec.getExtUnpacker(r);if(!a)throw new Error("Invalid ext type: "+(r?"0x"+r.toString(16):r));return a(l.slice.call(e.buffer,n,i))}function w(e){var t=e.reserve(1);return e.buffer[t]}function x(e){var t=e.reserve(1),n=e.buffer[t];return 128&n?n-256:n}function v(e){var t=e.reserve(2),n=e.buffer;return n[t++]<<8|n[t]}function b(e){var t=e.reserve(2),n=e.buffer,r=n[t++]<<8|n[t];return 32768&r?r-65536:r}function S(e){var t=e.reserve(4),n=e.buffer;return 16777216*n[t++]+(n[t++]<<16)+(n[t++]<<8)+n[t]}function E(e){var t=e.reserve(4),n=e.buffer;return n[t++]<<24|n[t++]<<16|n[t++]<<8|n[t]}function k(e,t){return function(n){var r=n.reserve(e);return t.call(n.buffer,r,f)}}function B(e){return new a(this,e).toNumber()}function A(e){return new o(this,e).toNumber()}function P(e){return new a(this,e)}function I(e){return new o(this,e)}function M(e){return r.read(this,e,!1,23,4)}function U(e){return r.read(this,e,!1,52,8)}},4:(e,t,n)=>{var r=n(970);function i(e){var t,n=new Array(256);for(t=0;t<=127;t++)n[t]=a(t);for(t=128;t<=143;t++)n[t]=s(t-128,e.map);for(t=144;t<=159;t++)n[t]=s(t-144,e.array);for(t=160;t<=191;t++)n[t]=s(t-160,e.str);for(n[192]=a(null),n[193]=null,n[194]=a(!1),n[195]=a(!0),n[196]=o(e.uint8,e.bin),n[197]=o(e.uint16,e.bin),n[198]=o(e.uint32,e.bin),n[199]=o(e.uint8,e.ext),n[200]=o(e.uint16,e.ext),n[201]=o(e.uint32,e.ext),n[202]=e.float32,n[203]=e.float64,n[204]=e.uint8,n[205]=e.uint16,n[206]=e.uint32,n[207]=e.uint64,n[208]=e.int8,n[209]=e.int16,n[210]=e.int32,n[211]=e.int64,n[212]=s(1,e.ext),n[213]=s(2,e.ext),n[214]=s(4,e.ext),n[215]=s(8,e.ext),n[216]=s(16,e.ext),n[217]=o(e.uint8,e.str),n[218]=o(e.uint16,e.str),n[219]=o(e.uint32,e.str),n[220]=o(e.uint16,e.array),n[221]=o(e.uint32,e.array),n[222]=o(e.uint16,e.map),n[223]=o(e.uint32,e.map),t=224;t<=255;t++)n[t]=a(t-256);return n}function a(e){return function(){return e}}function o(e,t){return function(n){var r=e(n);return t(n,r)}}function s(e,t){return function(n){return t(n,e)}}t.getReadToken=function(e){var t=r.getReadFormat(e);return e&&e.useraw?function(e){var t,n=i(e).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],t=160;t<=191;t++)n[t]=s(t-160,e.bin);return n}(t):i(t)}},897:(e,t,n)=>{var r=n(816).u,i=n(236),a=n(398),o=n(704);function s(){var e=this.options;return this.encode=function(e){var t=a.getWriteType(e);return function(e,n){var r=t[typeof n];if(!r)throw new Error('Unsupported type "'+typeof n+'": '+n);r(e,n)}}(e),e&&e.preset&&i.setExtPackers(this),this}o.install({addExtPacker:function(e,t,n){n=o.filter(n);var i=t.name;function a(t){return n&&(t=n(t)),new r(t,e)}i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=a:(this.extEncoderList||(this.extEncoderList=[])).unshift([t,a])},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),n=e.constructor,r=n&&n.name&&t[n.name];if(r)return r;for(var i=this.extEncoderList||(this.extEncoderList=[]),a=i.length,o=0;o<a;o++){var s=i[o];if(n===s[0])return s[1]}},init:s}),t.preset=s.call(o.preset)},685:(e,t,n)=>{var r=n(251),i=n(305),a=i.Uint64BE,o=i.Int64BE,s=n(40).h,l=n(204),c=l.global,f=l.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,h=l.hasBuffer&&c.prototype||{};function u(){var e=s.slice();return e[196]=d(196),e[197]=p(197),e[198]=y(198),e[199]=d(199),e[200]=p(200),e[201]=y(201),e[202]=m(202,4,h.writeFloatBE||x,!0),e[203]=m(203,8,h.writeDoubleBE||v,!0),e[204]=d(204),e[205]=p(205),e[206]=y(206),e[207]=m(207,8,g),e[208]=d(208),e[209]=p(209),e[210]=y(210),e[211]=m(211,8,w),e[217]=d(217),e[218]=p(218),e[219]=y(219),e[220]=p(220),e[221]=y(221),e[222]=p(222),e[223]=y(223),e}function d(e){return function(t,n){var r=t.reserve(2),i=t.buffer;i[r++]=e,i[r]=n}}function p(e){return function(t,n){var r=t.reserve(3),i=t.buffer;i[r++]=e,i[r++]=n>>>8,i[r]=n}}function y(e){return function(t,n){var r=t.reserve(5),i=t.buffer;i[r++]=e,i[r++]=n>>>24,i[r++]=n>>>16,i[r++]=n>>>8,i[r]=n}}function m(e,t,n,r){return function(i,a){var o=i.reserve(t+1);i.buffer[o++]=e,n.call(i.buffer,a,o,r)}}function g(e,t){new a(this,t,e)}function w(e,t){new o(this,t,e)}function x(e,t){r.write(this,e,t,!1,23,4)}function v(e,t){r.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=u())[202]=m(202,4,x),t[203]=m(203,8,v),t):f||l.hasBuffer&&e&&e.safe?function(){var e=s.slice();return e[196]=m(196,1,c.prototype.writeUInt8),e[197]=m(197,2,c.prototype.writeUInt16BE),e[198]=m(198,4,c.prototype.writeUInt32BE),e[199]=m(199,1,c.prototype.writeUInt8),e[200]=m(200,2,c.prototype.writeUInt16BE),e[201]=m(201,4,c.prototype.writeUInt32BE),e[202]=m(202,4,c.prototype.writeFloatBE),e[203]=m(203,8,c.prototype.writeDoubleBE),e[204]=m(204,1,c.prototype.writeUInt8),e[205]=m(205,2,c.prototype.writeUInt16BE),e[206]=m(206,4,c.prototype.writeUInt32BE),e[207]=m(207,8,g),e[208]=m(208,1,c.prototype.writeInt8),e[209]=m(209,2,c.prototype.writeInt16BE),e[210]=m(210,4,c.prototype.writeInt32BE),e[211]=m(211,8,w),e[217]=m(217,1,c.prototype.writeUInt8),e[218]=m(218,2,c.prototype.writeUInt16BE),e[219]=m(219,4,c.prototype.writeUInt32BE),e[220]=m(220,2,c.prototype.writeUInt16BE),e[221]=m(221,4,c.prototype.writeUInt32BE),e[222]=m(222,2,c.prototype.writeUInt16BE),e[223]=m(223,4,c.prototype.writeUInt32BE),e}():u();var t}},398:(e,t,n)=>{var r=n(634),i=n(305),a=i.Uint64BE,o=i.Int64BE,s=n(204),l=n(43),c=n(685),f=n(40).h,h=n(816).u,u="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,t.getWriteType=function(e){var t,n=c.getWriteToken(e),i=e&&e.useraw,y=u&&e&&e.binarraybuffer,m=y?s.isArrayBuffer:s.isBuffer,g=y?function(e,t){b(e,new Uint8Array(t))}:b,w=d&&e&&e.usemap?function(e,t){if(!(t instanceof Map))return S(e,t);var r=t.size;n[r<16?128+r:r<=65535?222:223](e,r);var i=e.codec.encode;t.forEach((function(t,n,r){i(e,n),i(e,t)}))}:S;return{boolean:function(e,t){n[t?195:194](e,t)},function:v,number:function(e,t){var r=0|t;t===r?n[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](e,r):n[203](e,t)},object:i?function(e,t){if(m(t))return function(e,t){var r=t.length;n[r<32?160+r:r<=65535?218:219](e,r),e.send(t)}(e,t);x(e,t)}:x,string:(t=i?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5},function(e,r){var i=r.length,a=5+3*i;e.offset=e.reserve(a);var o=e.buffer,s=t(i),c=e.offset+s;i=l.write.call(o,r,c);var f=t(i);if(s!==f){var h=c+f-s,u=c+i;l.copy.call(o,o,h,c,u)}n[1===f?160+i:f<=3?215+f:219](e,i),e.offset+=i}),symbol:v,undefined:v};function x(e,t){if(null===t)return v(e,t);if(m(t))return g(e,t);if(r(t))return function(e,t){var r=t.length;n[r<16?144+r:r<=65535?220:221](e,r);for(var i=e.codec.encode,a=0;a<r;a++)i(e,t[a])}(e,t);if(a.isUint64BE(t))return function(e,t){n[207](e,t.toArray())}(e,t);if(o.isInt64BE(t))return function(e,t){n[211](e,t.toArray())}(e,t);var i=e.codec.getExtPacker(t);if(i&&(t=i(t)),t instanceof h)return function(e,t){var r=t.buffer,i=r.length,a=p[i]||(i<255?199:i<=65535?200:201);n[a](e,i),f[t.type](e),e.send(r)}(e,t);w(e,t)}function v(e,t){n[192](e,t)}function b(e,t){var r=t.length;n[r<255?196:r<=65535?197:198](e,r),e.send(t)}function S(e,t){var r=Object.keys(t),i=r.length;n[i<16?128+i:i<=65535?222:223](e,i);var a=e.codec.encode;r.forEach((function(n){a(e,n),a(e,t[n])}))}}},40:(e,t)=>{for(var n=t.h=new Array(256),r=0;r<=255;r++)n[r]=i(r);function i(e){return function(t){var n=t.reserve(1);t.buffer[n]=e}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";function e(e){let t=new Image;return t.onload=function(){this.isLoaded=!0},t.src=e,t}n.d(r,{Ay:()=>he,jv:()=>pe});const t=document.getElementById("serverBrowser"),i=document.getElementById("loadingText"),a=document.getElementById("mainMenu"),o=document.getElementById("menuCardHolder"),s=document.getElementById("nameInput"),l=document.getElementById("leaderboard"),c=document.getElementById("actionBar"),f=document.getElementById(""),h=(document.getElementById("ageBar"),document.getElementById("ageBarBody")),u=document.getElementById("ageText");function d(e){if("number"!=typeof e)throw new TypeError("value passed to kFormat is not number",e);return e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e}class p{constructor(e){this.x=e.x,this.y=e.y,this.x1=this.x,this.y1=this.y,this.lastx=this.x,this.lasty=this.y,this.lerpx=this.x,this.lerpy=this.y,this.lastlerpx=this.lerpx,this.lastlerpy=this.lerpy,this.xVel=this.x,this.yVel=this.y,this.xAccel=this.x,this.yAccel=this.y}}class y extends p{constructor({sid:e,type:t,name:n,x:r,y:i,scale:a,data:o,dir:s}){super({x:r,y:i}),this.sid=e,this.type=t,this.data=o,this.x=r,this.y=i,this.xWiggle=0,this.yWiggle=0,this.name=n||this.data.name,this.scale=a,this.spin=this.name.includes("mill"),this.spinDir=s,console.log(e,t,n,r,i,a,o,s)}update(e){this.spin&&(this.spinDir+=.0012*e),this.xWiggle&&(this.xWiggle*=Math.pow(.99,e)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,e))}}class m extends p{constructor(e){super(e),this.sid=e.sid,this.health=D.maxPlayerHealth,this.maxHealth=this.health,this.t2=0,this.t1=0,this.delta=0,this.d2=0,this.d1=0,this.dir=0,this.outOfRange=!1,this.rightFoot=!1,this.scale=35,this.name=e.name,this.animTime=0,this.animSpeed=0,this.targetAngle=0,this.dirPlus=0,this.alive=!0,this.weapons=[C[0]],this.weaponIndex=this.weapons[0],this.items=[L[0],O[0],O[1],O[2]],this.xp=0,this.maxXP=300,this.age=1,this.a=0,this.f=0}resetStuff(){this.weapons=[C[0]],this.items=[L[0],O[0],O[1],O[2]]}changeHealth(e){this.health+=e}spawn(e){}startAnimation(e){this.animTime=this.animSpeed=300,this.targetAngle=e?-D.hitAngle:-Math.PI,this.b=0,this.$=0}animate(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,this.a=0,this.f=0):0==this.f?(this.a+=e/(this.animSpeed*D.hitReturnRatio),this.dirPlus=g(0,this.targetAngle,Math.min(1,this.a)),this.a>=1&&(this.a=1,this.f=1)):(this.a-=e/(this.animSpeed*(1-D.hitReturnRatio)),this.dirPlus=g(0,this.targetAngle,Math.max(0,this.a))))}}function g(e,t,n){return e+(t-e)*n}function w(e,t,n,r){return Math.atan2(r-t,n-e)}class x{constructor(e,t,n,r){this.x=e,this.y=t,this.size=n,this.dir=r,this.alpha=.6,this.sizeAlpha=1,this.waitTime=1e3}update(e){if(this.waitTime>0)this.waitTime-=e;else{if(this.alpha<=0)return;this.alpha-=e/700,this.alpha<=0&&(this.alpha=0),this.sizeAlpha+=e/80}}draw(e,t){Q.beginPath(),Q.fillStyle="#000",Q.globalAlpha=this.alpha,Q.arc(this.x-e,this.y-t,this.size,0,2*Math.PI),Q.fill()}}let v=[];function b(e,t,n){v.push(new x(e,t,n))}let S=0;var E=Date.now();let k=0;function B(){return he.lockDir?lastDir:Math.atan2(pe.mouseY-window.innerHeight/2,pe.mouseX-window.innerWidth/2)}const A=document.getElementById("chatLog");function P(e,t){let n=`${e}: ${t}`,r=document.createElement("p");r.className="chatElm",r.innerText=n,A.appendChild(r),A.scrollTop=A.scrollHeight}function I(e){const t={":smile:":"😄",":sob:":"😭",":heart:":"❤️",":thumbsup:":"👍",":fire:":"🔥",":laughing:":"😂",":clap:":"👏",":wink:":"😉",":sunglasses:":"😎",":thinking:":"🤔",":grin:":"😀",":star:":"⭐",":check:":"✔️",":x:":"❌",":warning:":"⚠️",":sparkles:":"✨",":100:":"💯",":pray:":"🙏",":wave:":"👋",":ok:":"👌",":poop:":"💩",":shit:":"💩",":kiss:":"😘",":sleeping:":"😴",":angry:":"😠",":neutral:":"😐",":confused:":"😕",":shocked:":"😲",":party:":"🥳",":drool:":"🤤",":money:":"🤑",":alien:":"👽",":robot:":"🤖",":cat:":"🐱",":dog:":"🐶",":unicorn:":"🦄",":sun:":"☀️",":moon:":"🌙",":cloud:":"☁️",":rainbow:":"🌈",":coffee:":"☕",":pizza:":"🍕",":burger:":"🍔",":fries:":"🍟",":cake:":"🎂",":gift:":"🎁",":balloon:":"🎈",":muscle:":"💪",":eyes:":"👀",":skull:":"💀",":ghost:":"👻",":zombie:":"🧟",":vampire:":"🧛",":angel:":"😇",":devil:":"😈",":hug:":"🤗",":writing:":"✍️",":phone:":"📞",":laptop:":"💻",":hourglass:":"⏳",":lock:":"🔒",":unlock:":"🔓",":key:":"🔑",":music:":"🎵",":microphone:":"🎤",":camera:":"📷",":video:":"📹",":tv:":"📺",":game:":"🎮",":airplane:":"✈️",":car:":"🚗",":train:":"🚆",":rocket:":"🚀",":medal:":"🏅",":trophy:":"🏆"};return e.replace(/:\w+:/g,(e=>t[e]||e))}class M extends p{constructor(e,t,n,r){super({x:0,y:0}),this.id=e,this.type=t,this.data=H[t],this.img=this.data.img,this.health=this.data.health,this.dir=0,this.name=this.data.name,this.weight=this.data.weight,this.turnSpeed=this.data.turnSpeed,this.drop=this.data.drop,this.name=this.data.name}}class U{constructor(e,t,n,r,i,a){Object.assign(this,{x:e,y:t,text:n,size:r,color:i,life:a})}update(e){this.life-=e,this.life<=0||(this.y-=.18*e)}render(e,t){this.life<=0||(Q.beginPath(),Q.fillStyle=this.color,Q.font=this.size+"px Hammersmith One",Q.fillText(this.text,this.x-e,this.y-t))}}const T=new class{#e=[];addText(e,t,n,r,i,a){this.#e.push(new U(e,t,n,r,i,a))}renderTexts(e,t,n){let r;this.#e.filter((e=>e.life>=0));for(let i=this.#e.length;i--;)(r=this.#e[i])&&(r.update(n),r.render(e,t))}},R=T;let W=99999;const D={mapScale:6e3,maxNameLength:15,maxChatLength:40,playerScale:35,lineWidth:5.5,maxScreenWidth:1920,maxScreenHeight:1080,maxPlayerHealth:100,snowBiomeTop:1e3,serverUpdateRate:9,riverWidth:400,riverPadding:20,waveSpeed:1e-4,waveMax:1.2,outlineColor:"#525252",textOutlineColor:"#3d3f42",nameY:34,healthBarWidth:55,healthBarPad:4.5,chatCountdown:4e3,hitReturnRatio:.25,hitAngle:Math.PI/2,wiggleIntensity:20,iconPad:.9},C=[{id:0,type:0,name:"tool hammer",desc:"tool for gathering all resources",img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/hammer_1.png"),length:140,width:140,xOff:-3,yOff:18,dmg:25,range:65,gather:1,speed:300,weapon:!0,gameID:0}],O=[{id:0,name:"wall",description:"protects your base from hostile aggressors",health:400,scale:55,weapon:!1,isItem:!0,holdOffset:20,placeOffset:-5,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/3_wood_wall.svg?v=1735857908118"),hitResistance:80},{id:1,name:"baby spikes",description:"fortifies your base, knocks back hostile aggressors",health:300,scale:50,holdOffset:14,placeOffset:-5,weapon:!1,isItem:!0,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/Untitled%20(1).svg?v=1735910950877"),hitResistance:20},{id:2,name:"basic windmill",description:"generates gold over time",health:400,scale:75,holdOffset:20,placeOffset:5,weapon:!1,isItem:!0,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/mill.svg?v=1735857620463"),hitResistance:120}],H=[{id:0,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/cow.png"),killScore:150,health:500,weightM:.8,speed:95e-5,turnSpeed:.001,scale:72,drop:["food",50]},{id:1,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/pig.png"),killScore:200,health:800,weightM:.6,speed:85e-5,turnSpeed:.001,scale:72,drop:["food",80]}],L=[{id:0,name:"apple",heal:10,scale:22,holdOffset:15,weapon:!1,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/0_apple.svg?v=1735858017502")},{id:1,name:"fly honeysuckle",heal:60,slowEffect:6e3,img:e("https://cdn.glitch.global/bcb2c609-6efd-4c0b-8eb7-183d579cc793/Apple-1-Modified.webp?v=1735782332913")},{id:2,name:"pork",heal:20,poisonEffect:5e3,haram:!0}],j={1:function(e){let t;S++;for(let e=he.players.length;e--;)(t=he.players[e])&&(t.outOfRange=!0);for(let t=0;t<e.length;t++){let n=he.getPlayerBySid(e[t].sid);n.outOfRange=!1,n.x=e[t].x,n.y=e[t].y,n.x1=n.lerpx,n.y1=n.lerpy,n.t1=void 0===n.t2?Date.now():n.t2,n.t2=Date.now(),n.d1=void 0===n.d2?e[t].dir:n.d2,n.d2=e[t].dir,n.delta=0,n.weaponIndex=e[t].weaponIndex;let r=.01*performance.now(),i=[{x:n.lerpx+20*Math.cos(w(n.x,n.y,n.x1,n.y1)+Math.PI/2)+5*Math.sin(r),y:n.lerpy+20*Math.sin(w(n.x,n.y,n.x1,n.y1)+Math.PI/2)+5*Math.cos(r)},{x:n.lerpx+20*Math.cos(w(n.x,n.y,n.x1,n.y1)-Math.PI/2)+5*Math.sin(r+Math.PI),y:n.lerpy+20*Math.sin(w(n.x,n.y,n.x1,n.y1)-Math.PI/2)+5*Math.cos(r+Math.PI)}];n.rightFoot?b(i[1].x,i[1].y,10):b(i[0].x,i[0].y,10),n.rightFoot=!n.rightFoot}S%15==0&&(E=Date.now(),he.webSocket.wsSend("0"));let n=B();n!==k&&(k=n,he.webSocket.wsSend("d",B()))},2:function([e,t]){console.warn(e,t);let n=he.getPlayerBySid(e.sid);n?(n.x=e.x,n.y=e.y,n.alive=!0,n.resetStuff()):(n=new m(e),he.players.push(n)),t&&(he.player=n,function(e=[...he.player.weapons,...he.player.items]){c.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.className="actionBarItems",t.id=e.name,t.onclick=function(){he.webSocket.wsSend("s",e.id,e?.weapon?"weapon":e?.heal?"food":"item")};const n=document.createElement("canvas");n.width=n.height=66,n.style.width="100%",n.style.height="100%",n.style.zIndex="99";const r=n.getContext("2d");let i=e.img;const a=e.iPad||1,o=D.iconPad,s=n.width*a*o+5,l=n.height*a*o+5,f=(n.width-s)/2,h=(n.height-l)/2;r.clearRect(0,0,n.width,n.height),r.save(),r.translate(n.width/2,n.height/2),e.weapon&&r.rotate(Math.PI/4+Math.PI),r.translate(-n.width/2,-n.height/2),r.drawImage(i,f,h,s,l),r.restore(),t.appendChild(n),c.appendChild(t)}))}())},r:function(e){let t=e[0],n=he.getPlayerBySid(t);if(!n)return void console.error(`player with sid ${t} not found`);let r=he.players.indexOf(n);-1!==r?he.players.splice(r,1):console.error(`player with sid ${t} not found in the players array`)},6:function(e){he.getPlayerBySid(e[0]).chatMessage=I(e[1]),he.getPlayerBySid(e[0]).chatCountdown=D.chatCountdown,P(he.getPlayerBySid(e[0]).name||"unknown",I(e[1]))},0:function(){let e=Date.now()-E;document.getElementById("pingDisplay").innerHTML=`Ping: ${e}ms Objects ${he.buildings.length}`},a:function(e){for(let t=0;t<e.length;t++){let n=he.getAnimalBySid(e[t].sid);n?(n.x1=n.lerpx,n.y1=n.lerpy,n.x=e[t].x,n.y=e[t].y,n.t1=void 0===n.t2?Date.now():n.t2,n.t2=Date.now(),n.d1=void 0===n.d2?e[t].dir:n.d2,n.d2=e[t].dir,n.delta=0):(n=new M(e[t].sid,e[t].type||1,e[t].x,e[t].y),n.sid=e[t].sid,n.x=e[t].x,n.y=e[t].y,n.d2=e[t].dir,n.health=e[t].health,he.animals.push(n))}},l:function(e){l.innerHTML='\n    <div style="font-size: 30px;">Leaderboard</div>\n    ';for(let t=0;t<e.length;t++)l.innerHTML+=`\n        <div id="leaderHolder" style="display: flex; justify-content: space-between; align-items: center;">\n            <div id="leaderboardItem" style="font-size: 22px; color: ${e[t].sid==he.player.sid?"#fff":"rgba(255, 255, 255, 0.5)"}; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 75%;">\n                ${t+1}. [${e[t].sid}] ${e[t].name}\n            </div>\n\n            <div id="leaderScore" style="font-size: 22px; color: #fff;">\n                ${d(e[t].gold)}\n            </div>\n        </div>\n        `},g:function(e){for(let t of e[0]){let e=new y(t);he.buildings.push(e)}},h:function([e,t,n]){let r=he.getPlayerBySid(e);if(r){let e;r.startAnimation(n.length);for(let t=n.length;t--;)(e=he.getBuildingBySid(n[t].sid))&&(e.xWiggle+=D.wiggleIntensity*Math.cos(w(he.player.lerpx,he.player.lerpy,e.x,e.y)),e.yWiggle+=D.wiggleIntensity*Math.sin(w(he.player.lerpx,he.player.lerpy,e.x,e.y)))}},o:function([e,t]){let n=he.getPlayerBySid(e);n.health+=t,n.health<=0&&(n.alive=!1),R.addText(n.lerpx,n.lerpy,Math.abs(t),50,t<0?"#fff":"#8ecc51",500),n.sid==he.player.sid&&(f.style.display="block",f.style.fontSize="0px",W=0,setTimeout((function(){f.style.display="none"}),D.deathFadeout))},d:function([e]){he.buildings.splice(he.buildings.indexOf(he.getBuildingBySid(e)),1)},x:function([e]){he.player.xp+=e,he.player.xp>=he.player.maxXP?(he.player.xp=0,he.player.maxXP*=1.2,he.player.age<21?(he.player.age++,u.innerHTML=`AGE ${he.player.age}`):u.innerHTML="MAX AGE"):(he.player.xp+=e,h.style.width=he.player.xp/he.player.maxXP*100+"px")}},N="#b6db66",$="#fff",z="#dbc666",F=document.getElementById("minimap"),Y=F.getContext("2d");function _(e,t){return~~(Math.random()*(t-e+1))+e}let K={};function V(e){let t=e.y>=D.mapScale-D.snowBiomeTop?2:e.y<=D.snowBiomeTop?1:0,n=K[`${"bush"==e.name?e.name+""+e.y:e.name}${t}`];if(!n){let r=document.createElement("canvas"),i=2.5*e.scale+50;r.width=r.height=i;let a=r.getContext("2d");if(a.translate(i/2,i/2),a.rotate(Math.PI/2),a.strokeStyle=D.outlineColor,a.lineWidth=D.lineWidth,100===e.scale)for(let n=0;n<2;n++){const r=()=>n?.5*e.scale+30:e.scale+50;oe(a,7,r(),.7*r()),a.fillStyle=t?n?"#fff":"#e3f1f4":n?"#b4db62":"#9ebf57",a.fill(),n||a.stroke()}else if(90===e.scale||10===e.scale)a.fillStyle=2===t?"#938d77":"#939393",oe(a,3,e.scale,e.scale),a.fill(),a.stroke(),a.fillStyle=2===t?"#b2ab90":"#bcbcbc",oe(a,3,.55*e.scale,.65*e.scale),a.fill();else if(75===e.scale){!function(e,t,n,r){let i,a=Math.PI/2*3,o=Math.PI/6;e.beginPath(),e.moveTo(0,-r);for(let t=0;t<6;t++)i=_(n+.9,1.2*n),e.quadraticCurveTo(Math.cos(a+o)*i,Math.sin(a+o)*i,Math.cos(a+2*o)*r,Math.sin(a+2*o)*r),a+=2*o;e.lineTo(0,-r),e.closePath()}(a,0,e.scale+10,.8*e.scale),a.fillStyle=t?"#e3f1f4":"#89a54c",a.fill(),a.stroke(),a.fillStyle=t?"#6a64af":"#c15555";const n=4,r=2*Math.PI/n;for(let t=0;t<n;t++){const n=_(e.scale/3.5,e.scale/2.3);se(n*Math.cos(r*t),n*Math.sin(r*t),_(10,12),a)}}else 250===e.scale&&(a.fillStyle="#e0c655",oe(a,3,e.scale,e.scale),a.fill(),a.stroke(),a.fillStyle="#ebdca3",oe(a,3,.55*e.scale,.65*e.scale),a.fill());K[`${"bush"==e.name?e.name+""+e.y:e.name}${t}`]=r,n=r}return n}function X(e,t,n,r=Q,i=!0,a=!0){r.beginPath(),r.arc(e,t,n,0,2*Math.PI),i&&r.fill(),a&&r.stroke()}function q(e,t,n,r){r.drawImage(e.img,t-e.scale,n-e.scale,2*e.scale,2*e.scale)}function G(e){Q.lineWidth=5.5,Q.lineJoin="miter";const t=Math.PI/4*(C[0].armS||1);if(C[0].hndS,C[0].hndD,e.weaponIndex.weapon)!function(e,t,n,r){r.drawImage(e.img,t+e.xOff-e.length/2,0+e.yOff-e.width/2,e.length,e.width)}(C[0],e.scale,0,Q);else if(e.weaponIndex.heal){let t=L.find((t=>t.id==e.weaponIndex.id));q(t,e.scale+t.scale/2+t.holdOffset,0,Q)}else{let t=O.find((t=>t.id==e.weaponIndex.id));q(t,e.scale+t.scale/2+t.holdOffset-t.placeOffset,0,Q)}Q.fillStyle="#bf8f54",X(e.scale*Math.cos(t),e.scale*Math.sin(t),14),X(1*e.scale*Math.cos(1*-t),1*e.scale*Math.sin(1*-t),14),X(0,0,e.scale,Q)}const J=document.getElementById("gameCanvas"),Q=J.getContext("2d");Math.lerpAngle=function(e,t,n){Math.abs(t-e)>Math.PI&&(e>t?t+=2*Math.PI:e+=2*Math.PI);let r=t+(e-t)*n;return r>=0&&r<=2*Math.PI?r:r%(2*Math.PI)},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,r,i){return n<2*i&&(i=n/2),r<2*i&&(i=r/2),i<0&&(i=0),this.beginPath(),this.moveTo(e+i,t),this.arcTo(e+n,t,e+n,t+r,i),this.arcTo(e+n,t+r,e,t+r,i),this.arcTo(e,t+r,e,t,i),this.arcTo(e,t,e+n,t,i),this.closePath(),this},window.addEventListener("resize",(()=>{let e=window.innerWidth,t=window.innerHeight;J.width=e,J.height=t,J.style.width=`${e}px`,J.style.height=`${t}px`;let n=Math.max(e/D.maxScreenWidth,t/D.maxScreenHeight);Q.setTransform(n,0,0,n,(e-D.maxScreenWidth*n)/2,(t-D.maxScreenHeight*n)/2)})),window.onload=function(){let e=window.innerWidth,t=window.innerHeight;J.width=e,J.height=t,J.style.width=`${e}px`,J.style.height=`${t}px`;let n=Math.max(e/D.maxScreenWidth,t/D.maxScreenHeight);Q.setTransform(n,0,0,n,(e-D.maxScreenWidth*n)/2,(t-D.maxScreenHeight*n)/2)},J.style=`\n  width: ${window.innerWidth};\n  height: ${window.innerHeight};\n`;let Z,ee=0,te=0,ne=1,re={x:D.mapScale/2,y:D.mapScale/2};function ie(e,t,n=1){return(e-t)/n}function ae(e,t,n,r){const i=D.riverWidth+r,a=D.mapScale/2-t-i/2;a<D.maxScreenHeight&&a+i>0&&n.fillRect(0,a,D.maxScreenWidth,i)}function oe(e,t,n,r){let i,a,o=Math.PI/2*3,s=Math.PI/t;e.beginPath(),e.moveTo(0,-n);for(let l=0;l<t;l++)i=Math.cos(o)*n,a=Math.sin(o)*n,e.lineTo(i,a),o+=s,i=Math.cos(o)*r,a=Math.sin(o)*r,e.lineTo(i,a),o+=s;e.lineTo(0,-n),e.closePath()}function se(e,t,n,r,i,a){(r=r||mainContext).beginPath(),r.arc(e,t,n,0,2*Math.PI),a||r.fill(),i||r.stroke()}var le=n(830);class ce extends WebSocket{constructor(e,t){super(e,t),this.wsSend=function(e,...t){let n=[e,...t];this.send(new Uint8Array(le.encode(n)))},this.onopen=function(){this.wsSend("0",Date.now())},this.onmessage=function(e){!function(e){if("string"!=typeof e[0][0])throw new TypeError("packet type is not of String");if("function"!=typeof j[e[0][0]])throw new Error("function type does not exist for packet type",e);j[e[0][0]](e[0][1])}(e=(0,le.decode)(new Uint8Array(e.data)))},this.onerror=function(e){console.error(e),alert("failed to connect to server. check the console and join the discord server to report this issue.")}}}const fe=new class{constructor(){this.players=[],this.buildings=[],this.animals=[],this.projectiles=[],this.player=null,this.moveDirection=null,this.servers={testus:"wss://servertest-1-83we.onrender.com",testusor:"https://servertest-3.onrender.com",testeu:"wss://servertest-2.onrender.com",miami:"wss://laughing-rotary-phone-4jw6qgq6w4pv3w6j-8080.app.github.dev/",eu:"wss://opulent-chainsaw-jjq9r4r9q6xv2pv5x-8080.app.github.dev/",asia:"wss://shiny-happiness-v6rgv6pp9rjjc6xrg-8080.app.github.dev/",scilicon:"wss://fictional-chainsaw-wr597rvvpqxg39r55-8080.app.github.dev/",dev:"wss://curious-petal-watchmaker.glitch.me"},this.serverURL=this.servers.dev,this.webSocket=null,this.lockDir=!1}changeRegion(e){this.serverURL=this.servers[e]}spawn(){this.webSocket=new ce(this.serverURL),this.webSocket.binaryType="arraybuffer",this.webSocket.onopen=()=>{this.webSocket.wsSend("sp",s.value),a.style.display="none"},P("Game","spawning in "+this.serverURL)}getPlayerBySid(e){return this.players.find((t=>t.sid==e))}getBuildingBySid(e){return this.buildings.find((t=>t.sid==e))}getAnimalBySid(e){return this.animals.find((t=>t.sid==e))}close(e){console.warn(e),alert(e)}},he=fe;let ue=Date.now(),de=Date.now();!function e(){de=Date.now(),function(e,t){if(he.player){let n;re.x+=ie(he.player.lerpx,re.x,200/e),re.y+=ie(he.player.lerpy,re.y,200/e);let r=t-1e3/D.serverUpdateRate;for(let t=he.players.length+he.animals.length;t--;)if(n=he.players[t]||he.animals[t-he.players.length])if(n.lastlerpx=n.lerpx,n.lastlerpy=n.lerpy,n.outOfRange)n.lerpx=n.x,n.lerpy=n.y;else{let t=n.t2-n.t1,i=(r-n.t1)/t;const a=170;n.delta+=e;let o=Math.min(1.7,n.delta/a),s=n.x-n.x1;n.lerpx=n.x1+s*o,s=n.y-n.y1,n.lerpy=n.y1+s*o,n.dir=Math.lerpAngle(n.d2,n.d1,Math.min(1.2,i))}Z=re.x-D.maxScreenWidth/2,ee=re.y-D.maxScreenHeight/2,te+=ne*D.waveSpeed*e,te>=D.waveMax?(te=D.waveMax,ne=-1):te<=1&&(te=ne=1),function(e,t,n){Q.globalAlpha=1,D.snowBiomeTop-t<=0&&D.mapScale-D.snowBiomeTop-t>=D.maxScreenHeight?(Q.fillStyle=N,Q.fillRect(0,0,D.maxScreenWidth,D.maxScreenHeight)):D.mapScale-D.snowBiomeTop-t<=0?(Q.fillStyle=z,Q.fillRect(0,0,D.maxScreenWidth,D.maxScreenHeight)):D.snowBiomeTop-t>=D.maxScreenHeight?(Q.fillStyle=$,Q.fillRect(0,0,D.maxScreenWidth,D.maxScreenHeight)):D.snowBiomeTop-t>=0?(Q.fillStyle=$,Q.fillRect(0,0,D.maxScreenWidth,D.snowBiomeTop-t),Q.fillStyle=N,Q.fillRect(0,D.snowBiomeTop-t,D.maxScreenWidth,D.maxScreenHeight-(D.snowBiomeTop-t))):(Q.fillStyle=N,Q.fillRect(0,0,D.maxScreenWidth,D.mapScale-D.snowBiomeTop-t),Q.fillStyle=z,Q.fillRect(0,D.mapScale-D.snowBiomeTop-t,D.maxScreenWidth,D.maxScreenHeight-(D.mapScale-D.snowBiomeTop-t))),Q.fillStyle="#dbc666",ae(0,t,Q,D.riverWidth),Q.fillStyle="#91b2db",ae(0,t,Q,1e3*(n-1)*n,(D.riverWidth,D.riverPadding))}(0,ee,te),function(e){Q.lineWidth=4,Q.globalAlpha=.06,Q.fillStyle="#000",Q.beginPath();for(let t=-e.x;t<D.maxScreenWidth;t+=60)t>0&&(Q.moveTo(t,0),Q.lineTo(t,D.maxScreenHeight));for(let t=-e.y;t<D.maxScreenHeight;t+=60)t>0&&(Q.moveTo(0,t),Q.lineTo(D.maxScreenWidth,t));Q.stroke(),Q.globalAlpha=1}(re),Q.globalAlpha=1,function(e,t){if(Q.fillStyle="#000",Q.globalAlpha=.15,e<=0&&Q.fillRect(0,0,-e,D.maxScreenHeight),D.mapScale-e<=D.maxScreenWidth){let n=Math.max(0,-t);Q.fillRect(D.mapScale-e,n,D.maxScreenWidth-(D.mapScale-e),D.maxScreenHeight-n)}if(t<=0&&Q.fillRect(-e,0,D.maxScreenWidth+e,-t),D.mapScale-t<=D.maxScreenHeight){let n=Math.max(0,-e),r=0;D.mapScale-e<=D.maxScreenWidth&&(r=D.maxScreenWidth-(D.mapScale-e)),Q.fillRect(n,D.mapScale-t,D.maxScreenWidth-n-r,D.maxScreenHeight-(D.mapScale-t))}}(Z,ee),Q.fillStyle="#000",function(e,t,n){let r;v=v.filter((e=>e.alpha>0));for(let i=v.length;i--;)(r=v[i])&&(r.update(n),r.draw(e,t));Q.globalAlpha=1}(Z,ee,e),Q.strokeStyle=D.outlineColor,Q.globalAlpha=1,function(e,t,n){let r;for(let i=he.players.length;i--;)(r=he.players[i])&&(r.animate(n),Q.beginPath(),Q.save(),Q.globalAlpha=1,Q.translate(r.lerpx-e,r.lerpy-t),Q.rotate((r.sid==he.player.sid?B():r.dir)+r.dirPlus),G(r),Q.restore())}(Z,ee,e),function(e,t){let n;for(let r=he.animals.length;r--;)if(n=he.animals[r]){Q.save(),Q.rotate(n.dir),Q.translate(n.x-e,n.y-t);const r=1.2*n.data.scale*(n.spriteMlt||1);Q.drawImage(n.data.img,-r,-r,2*r,2*r),Q.restore()}}(Z,ee),Q.globalAlpha=1,function(e,t,n){for(let r=he.buildings.length;r--;){const i=he.buildings[r];if(i){if(i.update(n),Q.save(),Q.translate(i.x+i.xWiggle-e,i.y+i.yWiggle-t),Q.rotate(i.spinDir),i?.data?.isItem){const e=O.find((e=>e.id==i.data.id));Q.drawImage(e.img,-e.scale,-e.scale,2*e.scale,2*e.scale)}else{const e=V(i);Q.drawImage(e,-e.width/2,-e.height/2)}Q.restore()}}}(Z,ee,e),Q.beginPath(),Q.globalAlpha=1,Q.fillStyle="rgba(0, 0, 70, 0.35)",Q.fillRect(0,0,D.maxScreenWidth,D.maxScreenHeight),function(e,t,n){let r;Q.strokeStyle=D.textOutlineColor,Q.globalAlpha=1;for(let i=he.players.length;i--;)if((r=he.players[i])&&(Q.font="30px Hammersmith One",Q.fillStyle="#fff",Q.textBaseline="middle",Q.textAlign="center",Q.lineWidth=8,Q.lineJoin="round",Q.strokeText("["+r.sid+"] "+r.name,r.lerpx-e,r.lerpy-t-r.scale-D.nameY),Q.fillText("["+r.sid+"] "+r.name,r.lerpx-e,r.lerpy-t-r.scale-D.nameY),r.health>0&&(Q.fillStyle=D.textOutlineColor,Q.roundRect(r.lerpx-e-D.healthBarWidth-D.healthBarPad,r.lerpy-t+r.scale+D.nameY,2*D.healthBarWidth+2*D.healthBarPad,17,8),Q.fill(),Q.fillStyle=r.sid==he.player.sid?"#8ecc51":"#cc5151",Q.roundRect(r.lerpx-e-D.healthBarWidth,r.lerpy-t+r.scale+D.nameY+D.healthBarPad,2*D.healthBarWidth*(r.health/r.maxHealth),17-2*D.healthBarPad,7),Q.fill()),!r.outOfRange&&r.chatCountdown>0)){r.chatCountdown=Math.max(r.chatCountdown-n,0),Q.font="32px Hammersmith One";let i=Q.measureText(r.chatMessage);Q.textBaseline="middle",Q.textAlign="center";let a=r.lerpx-e,o=r.lerpy-t-r.scale-90,s=47,l=i.width+17;Q.fillStyle="rgba(0, 0, 0, 0.2)",Q.roundRect(a-l/2,o-s/2,l,s,6),Q.fill(),Q.fillStyle="#fff",Q.fillText(r.chatMessage,a,o)}}(Z,ee,e),R.renderTexts(Z,ee,e),function(){let e=Y;e.clearRect(0,0,F.width,F.height),e.beginPath(),e.fillStyle="#fff",e.arc(he.player.lerpx/D.mapScale*F.width,he.player.lerpy/D.mapScale*F.height,4,0,2*Math.PI),e.fill()}()}else re.x=D.mapScale/2,re.y=D.mapScale/2}(de-ue,de),ue=de,requestAnimationFrame(e)}(),new class{constructor(){document.addEventListener("keydown",(e=>{this.handleKeyDown(e.keyCode)})),document.addEventListener("keyup",(e=>{this.handleKeyUp(e.keyCode)})),this.moveKey={87:[0,-1],38:[0,-1],83:[0,1],40:[0,1],65:[-1,0],37:[-1,0],68:[1,0],39:[1,0]},this.moveKeysPressed={},this.angle=void 0,this.chatToggle=!1,this.chat=document.getElementById("chatbox"),this.chat.style.display="none",this.oldIndexData={}}handleKeyDown(e){if(this.moveKey[e]&&!this.chatToggle&&(this.moveKeysPressed[e]=!0),[87,65,83,68].includes(e)&&this.updateAngle(),13==e&&(this.chatToggle?(fe.webSocket.wsSend("6",this.chat.value),this.chat.value="",this.chat.style.display="none",this.chatToggle=!1):(this.chat.style.display="block",this.chatToggle=!0,this.chat.focus())),"none"==this.chat.style.display)switch(e){case 88:fe.webSocket.wsSend("h",0),console.warn("lock dir"),fe.lockDir=!fe.lockDir;break;case 69:fe.webSocket.wsSend("h",1),console.warn("okok"),R.addText(fe.player.lerpx,fe.player.lerpy,"works",60,"#fff",900);break;case 81:fe.webSocket.wsSend("s",fe.player.items[0].id,"food");break;case 32:fe.player.weaponIndex.weapon?fe.webSocket.wsSend("h",1):fe.player.weaponIndex.food?fe.webSocket.wsSend("p","food"):(this.didPlaceObject=!0,fe.webSocket.wsSend("p",fe.player.weaponIndex.id)),this.oldIndexData=fe.player.weaponIndex;break;default:this.handleSelection(e)}}handleSelection(e){const t=e-49,n=t-fe.player.weapons.length;null!=fe.player.weapons[t]?fe.webSocket.wsSend("s",fe.player.weapons[t].id,"weapon"):null!=fe.player.items[n]&&fe.webSocket.wsSend("s",fe.player.items[n].id,0==n?"food":"item")}handleKeyUp(e){this.moveKey[e]&&delete this.moveKeysPressed[e],[87,65,83,68].includes(e)&&this.updateAngle(),32===e&&(this.oldIndexData.weapon&&fe.webSocket.wsSend("h",1),this.oldIndexData={})}updateAngle(){let e=0,t=0;for(let n in this.moveKeysPressed){const r=this.moveKey[n];e+=r[0],t+=r[1]}this.angle=0===e&&0===t?void 0:Math.atan2(t,e),fe.webSocket.wsSend("m",this.angle)}};const pe=new class{constructor(){this.mouseX=0,this.mouseY=0,this.mouseDown={left:!1,right:!1,middle:!1},document.addEventListener("mousemove",(e=>{this.mouseX=e.clientX,this.mouseY=e.clientY})),Q.canvas.addEventListener("mousedown",(e=>this.handleMouseDown(e))),Q.canvas.addEventListener("mouseup",(e=>this.handleMouseUp(e))),this.dataOnClick={}}handleMouseDown(e){0===e.button?this.mouseDown.left=!0:1===e.button?this.mouseDown.middle=!0:2===e.button&&(this.mouseDown.right=!0),fe.player.weaponIndex.weapon?fe.webSocket.wsSend("h",1):fe.player.weaponIndex.food?fe.webSocket.wsSend("p","food"):fe.webSocket.wsSend("p",fe.player.weaponIndex.id),this.dataOnClick=fe.player.weaponIndex}handleMouseUp(e){0===e.button?this.mouseDown.left=!1:1===e.button?this.mouseDown.middle=!1:2===e.button&&(this.mouseDown.right=!1),this.dataOnClick.weapon&&(fe.webSocket.wsSend("h",1),this.dataOnClick={})}};document.getElementById("enterGame").addEventListener("click",(e=>{he.changeRegion(t.value||"miami"),he.spawn(),i.style.display="block",o.style.display="none"})),window.oncontextmenu=e=>e.preventDefault()})()})();
